(function(){function n(n){n=n||{};var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push([r,n[r]]);return t}function t(n,t){return t(n),n}function r(n){var t=o.indexOf(n);return-1===t||t<=o.indexOf(l._log_level)?console.log.bind(console,n):s}function e(n){function t(n){try{if(n&&"function"==typeof n.then)return void n.then(t,r);u="resolved",i=n,c&&o(c)}catch(e){r(e)}}function r(n){u="rejected",i=n,c&&o(c)}function o(n){if("pending"===u)return void(c=n);var t=function(){var t;if(t="resolved"===u?n.on_resolved:n.on_rejected,!t)return void("resolved"===u?n.resolve(i):n.reject(i));var r;try{r=t(i)}catch(e){return void n.reject(e)}n.resolve(r)};setImmediate&&"function"==typeof setImmediate?setImmediate(t):process&&process.nextTick&&"function"==typeof process.nextTick?process.nextTick(t):setTimeout(t,1)}var i,u="pending",c=null;this.then=function(n,t){return new e(function(r,e){o({on_resolved:n,on_rejected:t,resolve:r,reject:e})})},this["catch"]=this.then.bind(this,void 0),n(t,r)}var o=["err","warn","info","debug"],i="0.0.1",u=Array.prototype.slice,c=(Object.prototype.toString,Object.prototype.hasOwnProperty,void 0),f=function(n){return u.call(n)},a=function(){p.Promise&&"function"==typeof p.Promise||(p.Promise=e)},s=function(){},l={};l._log_level="err";var p=function(){if("undefined"!=typeof window)return r("info")("using: window"),window;if("undefined"!=typeof global)return r("info")("using: global"),global;var n="no global found, fail";throw r("err")(n),new Error(n)}();p.S=l,l.install=function(){function n(n,t){for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)}function t(t,e,o){n(e,function(n,e){"function"!=typeof t[e]?(t[e]=n,r("info")("Install",e,"to",o)):r("warn")(e+" exists, uninstalled")})}function e(n,t){t.forEach(function(t){if(!n[t]){var e=n.prototype[t];r("debug")("Generalized",t),"function"==typeof e&&(n[t]=Function.call.bind(e))}})}t(Object,h,"Object"),t(Object.prototype,d,"Object.prototype"),t(Array,m,"Array"),t(Array.prototype,v,"Array.prototype"),e(Array,["join","reverse","sort","push","pop","shift","unshift","splice","concat","slice","indexOf","lastIndexOf","forEach","map","reduce","reduceRight","filter","some","every","find","findIndex","compact","densify","isEmpty","where","exclude"]),t(Function,g,"Function"),t(Function.prototype,y,"Function.prototype"),a()},l.uninstall=function(){};var d={create:function(){var n=function(){};return n.prototype=this,new n},forEach:function(n){var t=Object(this);console.log("this:",this);for(var r in t)t.hasOwnProperty(r)&&n(t[r],r)},tap:function(n){return n(this),this}},h={create:Function.call.bind(d.create),forEach:Function.call.bind(d.forEach),tap:Function.call.bind(d.tap)},y={compose:function(){var n=arguments,t=n.length-1,r=this;return function(){for(var e=t,o=n[t].apply(this,arguments);e--;)o=n[e].call(this,o);return r.call(this,o)}},wrap:function(n){return g.partial(n,this)},once:function(){var n,t=this,r=!1;return function(){return r||(n=t.apply(this,arguments),r=!0),n}},method:function(n,t){return this.prototype[n]?r("warn")("method failure: "+n+"exists."):this.prototype[n]=t,this},curry:function(n){function t(e){return function(){var o=(e||[]).concat(u.call(arguments,0));return o.length<n?t(o):r.apply(this,o)}}var r=this;return n=n||r.length,t()},partial:function(){function n(){var t=this,r=u.call(arguments,0);return function(){for(var e=u.call(arguments,0),o=[],i=0;i<r.length;i++)o[i]=r[i]===n._?e.shift():r[i];return t.apply(this,o.concat(e))}}return n._={},n}(),negate:function(){var n=this;return function(){return!n.apply(null,arguments)}}},g={compose:Function.call.bind(y.compose),partial:t(Function.call.bind(y.partial),function(n){n._=y.partial._}),curry:Function.call.bind(y.curry),negate:Function.call.bind(y.negate),trampoline:function(n){for(;n&&"function"==typeof n;)n=n()},once:Function.call.bind(y.once),wrap:Function.call.bind(y.wrap),noop:function(){}},v={partition:function(n){for(var t=[],r=[],e=0,o=this.length;o>e;e++)n(this[e],e)?t.push(this[e]):r.push(this[e]);return[t,r]},update:function(n,r){return t(this,function(t){t[n]=r})},reductions:function(n,r){return acc=[],this.reduce(g.wrap(n,function(n){return t(n.apply(this,u.call(arguments,1)),function(n){acc.push(n)})}),r),acc},exclude:function(){var n=this,t=u.call(arguments);return n.filter(function(n){return!t.reduce(function(t,r){return t||r===n},!1)})},indexWhere:function(t){function r(n,t){return function(r){return r[n]&&r[n]==t}}var e=n(t).map(function(n){return r(n[0],n[1])});return this.filter(function(n){return e.reduce(function(t,r){return t&&r(n)},!0)}).map(function(n,t){return t})},where:function(t){function r(n,t){return function(r){return r[n]&&r[n]==t}}var e=n(t).map(function(n){return r(n[0],n[1])});return this.filter(function(n){return e.reduce(function(t,r){return t&&r(n)},!0)})},isEmpty:function(){return this===p||l.isNull(this)||0===this.length},first:function(){return this.length>0?this[0]:void 0},last:function(){return this.length>0?this[this.length-1]:void 0},contains:function(n){return-1!==this.indexOf(n)},densify:function(){return this.filter(function(n){return"undefined"!=typeof n})},compact:function(){return this.filter(function(n){return!!n})},find:function(n){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t,r=Object(this),e=r.length>>>0,o=arguments[1],i=0;e>i;i++)if(t=r[i],n.call(o,t,i,r))return t;return void 0},findIndex:function(n){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t,r=Object(this),e=r.length>>>0,o=arguments[1],i=0;e>i;i++)if(t=r[i],n.call(o,t,i,r))return i;return-1},pluck:function(n){return this.filter(l.isObject).map(function(n){return n.name})}},m={from:function(){var n=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===n.call(t)},r=function(n){var t=Number(n);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},e=Math.pow(2,53)-1,o=function(n){var t=r(n);return Math.min(Math.max(t,0),e)};return function(n){var r=this,e=Object(n);if(null==n)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,u=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof u){if(!t(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var c,f=o(e.length),a=t(r)?Object(new r(f)):new Array(f),s=0;f>s;)c=e[s],a[s]=u?"undefined"==typeof i?u(c,s):u.call(i,c,s):c,s+=1;return a.length=f,a}}(),of:function(){return u.call(arguments)},dim:function(n,t){var r,e=[];for(r=0;n>r;r++)e[r]=t;return e},matrix:function(n,t,r){var e,o,i,u=[];for(o=0;n>o;o++){for(e=[],i=0;t>i;i++)e[i]=r;u[o]=e}return u}};l._log=r,l._DO_NOTHING=s,l.version=i,l._debug=function(){__debug&&console.log("_debug:",arguments)},l._assert=function(n,t){if("undefined"==typeof n||!n)throw""+t},l.pairs=n,l.keys=function(n){l._assert(null!=n,"keys err: obj null");var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r);return t},l.prop=function(n){return function(t){return null==t?c:t[n]}},l.extend=function(){if(arguments.length<1)throw"extend err: arguments.length < 1";var n=arguments[0];if("undefined"==typeof n||null==n)throw new TypeError("extend err: args[0] == null");for(var t=Object(n),r=1;r<arguments.length;r++)arguments[r]!==c&&l.pairs(arguments[r]).forEach(function(n){var r=n[0],e=n[1];t[r]="object"==typeof n[1]?l.extend({},t[r],e):e});return t},l.isUndefined=function(n){return"undefined"==typeof n},l.isObject=function(n){return"object"==typeof n},l.isNull=function(n){return"undefined"==typeof n||null==n},l.notNull=function(n){return"undefined"!=typeof n},l.notEmpty=function(n){switch(typeof n){case"undefined":return!1;case"object":return null!=n;case"string":return n.length>0;default:return!0}},e.resolve=function(n){return new e(function(t){t(n)})},e.all=function(){var n=(f(arguments)||[]).reduce(function(n,t){return t instanceof e?n.push(t):_is_array(t)&&t.forEach(n.push),n},[]);return console.log("debug-all",n),new e(function(t,r){function e(){return!u.some(function(n){return"pending"===n.status})}function o(){e()&&t(u)}function i(n){return{on_resolved:function(t){u[n].status="resolved",u[n].result=t},on_rejected:function(t){u[n].status="rejected",u[n].result=err}}}for(var u=[],c=0;c<n.length;c++){u.push({index:c,status:"pending",result:void 0});var f=i(c);n[c].then(f.on_resolved,f.on_rejected).then(o)}})}}).call(this);