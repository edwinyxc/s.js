(function(){function n(n){return"object"==typeof n}function t(n){var t=typeof n;switch(t){case"undefined":return!0;case"string":return 0===n.length;case"number":return 0===n;case"object":return Array.isArray(n)?0===n.length:0===o(n).length;case"function":return!1;default:return!0}}function r(n){return null==n}function e(n){return function(){return!n.apply(null,arguments)}}function i(){if(arguments.length<1)throw"extend err: arguments.length < 1";var n=Object(arguments[0]);if("undefined"==typeof n||null==n)throw new TypeError("extend err: args[0] == null");for(var t=arguments.length,r=t-1;r>=1;r--)arguments[r]!==h&&o(arguments[r]).forEach(function(t){var r=t[0],e=t[1];n[r]="object"==typeof t[1]?i({},n[r],e):e});return n}function o(n,t){n=n||{};var r=[];for(var e in n)n.hasOwnProperty(e)&&r.push(t?{name:e,value:n[e]}:[e,n[e]]);return r}function u(n,t){return t(n),n}function c(n){var t=f.indexOf(n);return-1===t||t<=f.indexOf(s)?console.log.bind(console,n):y}function a(n){function t(n){try{if(n&&"function"==typeof n.then)return void n.then(t,r);o="resolved",i=n,u&&e(u)}catch(c){r(c)}}function r(n){o="rejected",i=n,u&&e(u)}function e(n){if("pending"===o)return void(u=n);var t=function(){var t;if(t="resolved"===o?n.on_resolved:n.on_rejected,!t)return void("resolved"===o?n.resolve(i):n.reject(i));var r;try{r=t(i)}catch(e){return void n.reject(e)}n.resolve(r)};setImmediate&&"function"==typeof setImmediate?setImmediate(t):process&&process.nextTick&&"function"==typeof process.nextTick?process.nextTick(t):setTimeout(t,1)}var i,o="pending",u=null;this.then=function(n,t){return new a(function(r,i){e({on_resolved:n,on_rejected:t,resolve:r,reject:i})})},this["catch"]=this.then.bind(this,void 0),n(t,r)}var f=["err","warn","info","debug"],s="warn",l=Array.prototype.slice,h=void 0,p=function(n){return l.call(n)},d=function(){g.Promise&&"function"==typeof g.Promise||(g.Promise=a)},y=function(){},g=function(){if("undefined"!=typeof window)return c("info")("using: window"),window;if("undefined"!=typeof global)return c("info")("using: global"),global;var n="no global found, fail";throw c("err")(n),new Error(n)}(),m=function(){function n(n,t){for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)}function t(t,r,e){n(r,function(n,r){"function"!=typeof t[r]?t.hasOwnProperty(r)||(t[r]=n,c("info")("Install",r,"to",e)):c("warn")(e+"."+r+" exists, uninstalled")})}function r(n,t){t.forEach(function(t){if(!n.hasOwnProperty(t)){var r=n.prototype[t];c("debug")("Generalized",t),"function"==typeof r&&(n[t]=Function.call.bind(r))}})}t(Object,w,"Object"),t(Object.prototype,v,"Object.prototype"),t(Array,O,"Array"),t(Array.prototype,x,"Array.prototype"),r(Array,["join","reverse","sort","push","pop","shift","unshift","splice","concat","slice","indexOf","lastIndexOf","forEach","map","reduce","reduceRight","filter","some","every","find","findIndex","compact","densify","where","exclude","isEmpty"]),t(Function,j,"Function"),t(Function.prototype,b,"Function.prototype"),d()},v={extend:function(){return i.apply(this,[this].concat(l.call(arguments)))},pairs:function(){return o.apply(this,[this].concat(l.call(arguments)))},create:function(){var n=function(){};return n.prototype=this,new n},tap:function(n){return n(this),this},getOrCreate:function(n,t){return this.hasOwnProperty(n)?this[n]:(this[n]=t,t)},getOrDefault:function(n,t){var e;return this.hasOwnProperty(n)&&!r(e=this[n])?e:t}},w={isEmpty:t,isNull:r,notNull:e(r),notEmpty:e(t),extend:i,pairs:o,create:Function.call.bind(v.create),tap:Function.call.bind(v.tap)},b={compose:function(){var n=arguments,t=n.length-1,r=this;return function(){for(var e=t,i=n[t].apply(this,arguments);e--;)i=n[e].call(this,i);return r.call(this,i)}},wrap:function(n){return j.partial(n,this)},once:function(){var n,t=this,r=!1;return function(){return r||(n=t.apply(this,arguments),r=!0),n}},method:function(n,t){return this.prototype[n]?c("warn")("method failure: "+n+"exists."):this.prototype[n]=t,this},curry:function(n){function t(e){return function(){var i=(e||[]).concat(l.call(arguments,0));return i.length<n?t(i):r.apply(this,i)}}var r=this;return n=n||r.length,t()},partial:function(){function n(){var t=this,r=l.call(arguments,0);return function(){for(var e=l.call(arguments,0),i=[],o=0;o<r.length;o++)i[o]=r[o]===n._?e.shift():r[o];return t.apply(this,i.concat(e))}}return n._={},n}(),negate:function(){var n=this;return function(){return!n.apply(null,arguments)}}},j={compose:Function.call.bind(b.compose),partial:u(Function.call.bind(b.partial),function(n){n._=b.partial._}),curry:Function.call.bind(b.curry),negate:Function.call.bind(b.negate),trampoline:function(n){for(;n&&"function"==typeof n;)n=n()},once:Function.call.bind(b.once),wrap:Function.call.bind(b.wrap),noop:function(){}},x={isEmpty:function(){return g===this||r(this)||0===this.length},partition:function(n){for(var t=[],r=[],e=0,i=this.length;i>e;e++)n(this[e],e)?t.push(this[e]):r.push(this[e]);return[t,r]},update:function(n,t){return u(this,function(r){r[n]=t})},reductions:function(n,t){return acc=[],this.reduce(j.wrap(n,function(n){return u(n.apply(this,l.call(arguments,1)),function(n){acc.push(n)})}),t),acc},exclude:function(){var n=this,t=l.call(arguments);return n.filter(function(n){return!t.reduce(function(t,r){return t||r===n},!1)})},indexWhere:function(n){function t(n,t){return function(r){return r[n]&&r[n]==t}}var r=o(n).map(function(n){return t(n[0],n[1])});return this.filter(function(n){return r.reduce(function(t,r){return t&&r(n)},!0)}).map(function(n,t){return t})},where:function(n){function t(n,t){return function(r){return r[n]&&r[n]==t}}var r=o(n).map(function(n){return t(n[0],n[1])});return this.filter(function(n){return r.reduce(function(t,r){return t&&r(n)},!0)})},first:function(){return this.length>0?this[0]:void 0},last:function(){return this.length>0?this[this.length-1]:void 0},contains:function(n){return-1!==this.indexOf(n)},densify:function(){return this.filter(function(n){return"undefined"!=typeof n})},compact:function(){return this.filter(function(n){return!!n})},find:function(n){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t,r=Object(this),e=r.length>>>0,i=arguments[1],o=0;e>o;o++)if(t=r[o],n.call(i,t,o,r))return t;return void 0},findIndex:function(n){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t,r=Object(this),e=r.length>>>0,i=arguments[1],o=0;e>o;o++)if(t=r[o],n.call(i,t,o,r))return o;return-1},pluck:function(t){return this.filter(n).map(function(n){return n.name})}},O={from:function(){var n=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===n.call(t)},r=function(n){var t=Number(n);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},e=Math.pow(2,53)-1,i=function(n){var t=r(n);return Math.min(Math.max(t,0),e)};return function(n){var r=this,e=Object(n);if(null==n)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,u=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof u){if(!t(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var c,a=i(e.length),f=t(r)?Object(new r(a)):new Array(a),s=0;a>s;)c=e[s],f[s]=u?"undefined"==typeof o?u(c,s):u.call(o,c,s):c,s+=1;return f.length=a,f}}(),of:function(){return l.call(arguments)},dim:function(n,t){var r,e=[];for(r=0;n>r;r++)e[r]=t;return e},matrix:function(n,t,r){var e,i,o,u=[];for(i=0;n>i;i++){for(e=[],o=0;t>o;o++)e[o]=r;u[i]=e}return u}};a.resolve=function(n){return new a(function(t){t(n)})},a.all=function(){var n=(p(arguments)||[]).reduce(function(n,t){return t instanceof a?n.push(t):_is_array(t)&&t.forEach(n.push),n},[]);return console.log("debug-all",n),new a(function(t,r){function e(){return!u.some(function(n){return"pending"===n.status})}function i(){e()&&t(u)}function o(n){return{on_resolved:function(t){u[n].status="resolved",u[n].result=t},on_rejected:function(t){u[n].status="rejected",u[n].result=err}}}for(var u=[],c=0;c<n.length;c++){u.push({index:c,status:"pending",result:void 0});var a=o(c);n[c].then(a.on_resolved,a.on_rejected).then(i)}})},m()}).call(this);